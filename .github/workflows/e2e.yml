name: cross browser end-to-end testing 🚀

on:
  workflow_dispatch:
  push:
    branches:
      - 'main'
  pull_request:
   types:
      - opened
  schedule:
    - cron: '0 2 * * *'

jobs:
 cypress-run:
   runs-on: ubuntu-latest

   steps:
    - name: Checkout code 🛎
      uses: actions/checkout@v3

    - name: Run docker-compose 🐳
      run: docker-compose up -d

    - name: Save artifacts - screenshots 📷
      uses: actions/upload-artifact@v3
      with:
        name: cypress-screenshots
        path: ./cypress/screenshots

    - name: Save artifacts - videos
      uses: actions/upload-artifact@v3
      with:
        name: cypress-videos
        path: ./cypress/videos
