name: cross browser end-to-end testing ğŸš€

on:
  workflow_dispatch:
  push:
    branches:
      - 'main'
  pull_request:
   types:
      - opened
  schedule:
    - cron: '*/2 * * * *'

jobs:
 cypress-run:
   runs-on: ubuntu-latest
   steps:
    - name: Checkout code ğŸ›
      uses: actions/checkout@v3

    - name: Run docker-compose ğŸ³
      run: docker-compose up

    - name: Save artifacts - screenshots ğŸ“·
      uses: actions/upload-artifact@v3
      if: failure()
      with:
        name: cypress-screenshots
        path: /cypress/screenshots

    - name: Save artifacts - videos ğŸ“¹
      uses: actions/upload-artifact@v3
      if: always()
      with:
        name: cypress-videos
        path: /cypress/videos